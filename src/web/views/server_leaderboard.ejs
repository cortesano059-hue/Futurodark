<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Top - <%= guild.name %></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --accent: #ff4757; --bg-card: #1e2124; --text-dim: #b9bbbe; --border: #2f3136; }
        body {
            background: #0f1114 url('https://wallpaperaccess.com/full/1155017.jpg') center/cover fixed;
            color: white; font-family: 'Segoe UI', sans-serif; margin: 0; min-height: 100vh;
            box-shadow: inset 0 0 0 2000px rgba(15, 17, 20, 0.95);
        }
        .navbar { height: 60px; background: #141619; display: flex; align-items: center; justify-content: space-between; padding: 0 25px; border-bottom: 1px solid #000; position: sticky; top:0; z-index: 100; }
        .back-btn { color: var(--text-dim); text-decoration: none; font-weight: bold; font-size: 14px; display:flex; align-items:center; gap:5px;}
        .back-btn:hover { color: white; }

        .wrapper { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        
        .lb-header { display: flex; align-items: center; gap: 20px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
        .guild-icon { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--accent); }
        .guild-name { font-size: 24px; font-weight: bold; }

        .lb-table { width: 100%; border-collapse: collapse; background: var(--bg-card); border-radius: 8px; overflow: hidden; }
        .lb-table th { background: #141619; padding: 15px; text-align: left; font-size: 12px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }
        .lb-table td { padding: 15px; border-bottom: 1px solid var(--border); font-size: 14px; vertical-align: middle; }
        .lb-table tr:hover { background: rgba(255,255,255,0.02); }

        .rank-badge { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; background: #2f3136; color: var(--text-dim); }
        .rank-1 { background: #f1c40f; color: black; box-shadow: 0 0 10px rgba(241, 196, 15, 0.4); border: 2px solid #fff; } 
        .rank-2 { background: #bdc3c7; color: black; } 
        .rank-3 { background: #cd7f32; color: black; } 

        .user-cell { display: flex; align-items: center; gap: 10px; }
        .user-avatar { width: 35px; height: 35px; border-radius: 50%; object-fit: cover; }
        .user-tag { font-weight: 600; color: white; }

        .money-val { font-family: 'Consolas', monospace; font-weight: bold; color: #2ecc71; }
        .bank-val { font-family: 'Consolas', monospace; font-weight: bold; color: #f1c40f; opacity: 0.8; font-size: 13px; }
        .total-val { font-family: 'Consolas', monospace; font-weight: bold; color: white; font-size: 15px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="/leaderboard" class="back-btn"><i class="fas fa-arrow-left"></i> Volver a Selección</a>
        <div style="font-weight:bold; color:var(--accent);">TOP GLOBAL</div>
    </nav>

    <div class="wrapper">
        <div class="lb-header">
            <% if(guild.icon) { %>
                <img src="https://cdn.discordapp.com/icons/<%= guild.id %>/<%= guild.icon %>.png" class="guild-icon">
            <% } else { %>
                <div class="guild-icon" style="background:#333; display:flex; align-items:center; justify-content:center; color:white;"><%= guild.name.substring(0,2) %></div>
            <% } %>
            <div>
                <div class="guild-name"><%= guild.name %></div>
                <div style="color:var(--text-dim); font-size:14px;">Ranking de economía (Todos los usuarios)</div>
            </div>
        </div>

        <table class="lb-table">
            <thead>
                <tr>
                    <th style="width: 60px;">#</th>
                    <th>Usuario</th>
                    <th>Cartera</th>
                    <th>Banco</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <% if(topUsers.length > 0) { %>
                    <% topUsers.forEach((u, index) => { %>
                        <tr>
                            <td><div class="rank-badge rank-<%= index + 1 %>"><%= index + 1 %></div></td>
                            <td>
                                <div class="user-cell">
                                    <img src="<%= u.avatarUrl %>" class="user-avatar"> 
                                    <span class="user-tag"><%= u.displayName %></span> 
                                </div>
                            </td>
                            <td class="money-val">$<%= u.money.toLocaleString() %></td>
                            <td class="bank-val">$<%= u.bank.toLocaleString() %></td>
                            <td class="total-val">$<%= u.totalMoney.toLocaleString() %></td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr><td colspan="5" style="text-align:center; padding:40px; color:#666;">Nadie tiene dinero aquí.</td></tr>
                <% } %>
            </tbody>
        </table>
    </div>

</body>
</html>